<UserControl x:Class="NfcTimeCard.Views.EmployeeListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" 
             Background="White">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Text="従業員管理" FontSize="28" FontWeight="Bold" Foreground="#1a202c" Margin="0,0,0,20"/>

        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,15">
            <Button Content="+ 新規従業員登録" 
                    Style="{StaticResource ActionButtonStyle}" 
                    Background="#10b981" 
                    Click="BtnAddEmployee_Click"/>
            
            <Button Content="再読み込み" 
                    Style="{StaticResource ActionButtonStyle}"
                    Background="#64748b" 
                    Margin="15,0,0,0"
                    Click="BtnRefresh_Click"/>
        </StackPanel>

        <Border Grid.Row="2" Background="White" CornerRadius="15" BorderBrush="#e2e8f0" BorderThickness="1">
            <DataGrid x:Name="DgEmployees" 
                      AutoGenerateColumns="False" 
                      IsReadOnly="True"
                      Background="Transparent"
                      BorderThickness="0"
                      GridLinesVisibility="None"
                      RowHeight="45"
                      ColumnHeaderHeight="40"
                      FontSize="14"
                      SelectionMode="Single">
                
                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="#f8fafc"/>
                        <Setter Property="Foreground" Value="#64748b"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                        <Setter Property="Padding" Value="10,0"/>
                        <Setter Property="BorderThickness" Value="0,0,0,1"/>
                        <Setter Property="BorderBrush" Value="#e2e8f0"/>
                    </Style>

                    <ContextMenu x:Key="RowContextMenu">
                        <MenuItem Header="編集" Click="MenuEdit_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE70F;" FontFamily="Segoe Fluent Icons"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="打刻詳細" Click="MenuDetails_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE81C;" FontFamily="Segoe Fluent Icons"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="打刻エクスポート" Click="MenuExport_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xEDE1;" FontFamily="Segoe Fluent Icons"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem Header="削除" Click="MenuDelete_Click" Foreground="#ef4444">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE74D;" FontFamily="Segoe Fluent Icons" Foreground="#ef4444"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </DataGrid.Resources>

                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="ContextMenu" Value="{StaticResource RowContextMenu}"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#f1f5f9"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="コード" Binding="{Binding EmployeeCode}" Width="100"/>
                    <DataGridTextColumn Header="氏名" Binding="{Binding Name}" Width="150"/>
                    <DataGridTextColumn Header="性別" Binding="{Binding Gender}" Width="80"/>
                    <DataGridTextColumn Header="住所" Binding="{Binding Address}" Width="*"/>
                    <DataGridTextColumn Header="NFC ID" Binding="{Binding NfcId}" Width="180"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>